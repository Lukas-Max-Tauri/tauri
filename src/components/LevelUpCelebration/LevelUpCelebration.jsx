// src/components/LevelUpCelebration/LevelUpCelebration.jsx

import React, { useState, useEffect } from 'react';
import './LevelUpCelebration.css';

const UNLOCKABLE_ITEMS = {
    1: { name: "Trainings-Basis", icon: "üë®", features: ["Erste Sprachhilfe"] },
    2: { name: "Astronauten-Headset", icon: "üë®‚ÄçüöÄ", features: ["Verbesserte Aussprache"] },
    3: { name: "Vokabel-Rucksack", icon: "üéí", features: ["Mobiles Lernen"] },
    4: { name: "Erdsprachen-Modul", icon: "üåç", features: ["Grundsprachen verstehen"] },
    5: { name: "Raketen-Booster", icon: "üöÄ", features: ["2x schnelleres Lernen"] },
    6: { name: "Sternenstaub-Speicher", icon: "‚ú®", features: ["Dauerhaftes Merken"] },
    7: { name: "Translations-Gleiter", icon: "üõ∏", features: ["Schwebende √úbersetzung"] },
    8: { name: "Galaxis-Basis", icon: "üè†", features: ["Kosmisches Lernen"] },
    9: { name: "Wissens-Festung", icon: "üè∞", features: ["Unzerst√∂rbares Wissen"] },
    10: { name: "Sternen-Kompass", icon: "üå†", features: ["Navigationshilfe der Sprache"] },
    11: { name: "Turbo-Antrieb", icon: "üöÄ", features: ["3x Lerngeschwindigkeit"] },
    12: { name: "Blitz-Verst√§rker", icon: "‚ö°", features: ["Gedankenblitz-Aktivierung"] },
    13: { name: "Metropolen-Link", icon: "üåÜ", features: ["Urbanes Sprachgef√ºhl"] },
    14: { name: "Nova-Kristall", icon: "üí´", features: ["Explosives Lernen"] },
    15: { name: "Energie-Konverter", icon: "‚ö°", features: ["Kraft-zu-Wissen Wandler"] },
    16: { name: "Missions-Zentrale", icon: "üöÄ", features: ["Gef√ºhrtes Lernen"] },
    17: { name: "Regenbogen-Bridge", icon: "üåà", features: ["Sprach-Br√ºcken bauen"] },
    18: { name: "Sternen-Fokus", icon: "‚≠ê", features: ["Konzentriertes Lernen"] },
    19: { name: "Ehren-Medaille", icon: "üéñÔ∏è", features: ["Motivations-Boost"] },
    20: { name: "K√∂nigs-Modul", icon: "üëë", features: ["Herrschaftliches Sprechen"] },
    21: { name: "Explorer-Rakete", icon: "üöÄ", features: ["Neue Sprach-Horizonte"] },
    22: { name: "Kristall-Verst√§rker", icon: "üíé", features: ["Klare Aussprache"] },
    23: { name: "Stadt-Simulator", icon: "üèôÔ∏è", features: ["Urbane Dialekte"] },
    24: { name: "Power-Generator", icon: "‚ö°", features: ["Energie-zu-W√∂rter"] },
    25: { name: "Sprint-Rakete", icon: "üöÄ", features: ["Schnell-Lern-Modus"] },
    26: { name: "Herrscher-Ring", icon: "üëë", features: ["Autoritative Sprache"] },
    27: { name: "Verdienst-Orden", icon: "üéñÔ∏è", features: ["Erfolgs-Verst√§rkung"] },
    28: { name: "Leucht-Stern", icon: "‚≠ê", features: ["Erleuchtetes Lernen"] },
    29: { name: "Kometen-Schweif", icon: "üå†", features: ["Nachhaltiger Eindruck"] },
    30: { name: "Macht-Krone", icon: "üëë", features: ["Absolute Autorit√§t"] },
    31: { name: "Stern-Nebel", icon: "üí´", features: ["Mystische Weisheit"] },
    32: { name: "Stadt-Energie", icon: "‚ö°", features: ["Urbane Power"] },
    33: { name: "Licht-Stern", icon: "üåü", features: ["Erleuchtung"] },
    34: { name: "Spektral-Br√ºcke", icon: "üåà", features: ["Farben der Sprache"] },
    35: { name: "Hell-Stern", icon: "‚≠ê", features: ["Strahlende Pr√§senz"] },
    36: { name: "Sternen-Route", icon: "üå†", features: ["Weg der Sterne"] },
    37: { name: "Nebel-Wanderer", icon: "üåå", features: ["Intuitive Navigation"] },
    38: { name: "Funkel-Modul", icon: "‚ú®", features: ["Gl√§nzende Leistung"] },
    39: { name: "Meteor-Kraft", icon: "‚òÑÔ∏è", features: ["Einschlagende Wirkung"] },
    40: { name: "Kaiser-Krone", icon: "üëë", features: ["Imperiale Macht"] },
    41: { name: "Theater-Maske", icon: "üé≠", features: ["Ausdrucks-Kunst"] },
    42: { name: "Kunst-Palette", icon: "üé®", features: ["Kreative Sprache"] },
    43: { name: "Weisheits-Buch", icon: "üìö", features: ["Tiefes Wissen"] },
    44: { name: "Zirkus-Zelt", icon: "üé™", features: ["Vielf√§ltige Ausdr√ºcke"] },
    45: { name: "Glitzer-Staub", icon: "‚ú®", features: ["Magische Worte"] },
    46: { name: "Blitz-Genius", icon: "‚ö°", features: ["Geniale Einf√§lle"] },
    47: { name: "Polar-Stern", icon: "üåü", features: ["Orientierung"] },
    48: { name: "Farb-Spektrum", icon: "üåà", features: ["Nuancen-Verst√§ndnis"] },
    49: { name: "Leucht-Feuer", icon: "‚≠ê", features: ["Wegweisend"] },
    50: { name: "Kunst-Krone", icon: "üëë", features: ["Kreative Herrschaft"] },
    51: { name: "Diplomaten-Hand", icon: "ü§ù", features: ["Verhandlungs-Geschick"] },
    52: { name: "Glanz-Effekt", icon: "‚ú®", features: ["Strahlende Pr√§senz"] },
    53: { name: "Komet-Schweif", icon: "‚òÑÔ∏è", features: ["Bleibender Eindruck"] },
    54: { name: "Schrift-Rolle", icon: "üìú", features: ["Alte Weisheit"] },
    55: { name: "F√ºhrungs-Stern", icon: "‚≠ê", features: ["Wegweisend"] },
    56: { name: "Hell-Leuchte", icon: "üåü", features: ["Klare Sicht"] },
    57: { name: "Welt-Kenner", icon: "üåç", features: ["Globales Wissen"] },
    58: { name: "Sonnen-Kraft", icon: "‚òÄÔ∏è", features: ["Strahlende Energie"] },
    59: { name: "Nebel-Licht", icon: "üí´", features: ["Durchdringende Erkenntnis"] },
    60: { name: "Macht-Symbol", icon: "üëë", features: ["Absolute Kontrolle"] },
    61: { name: "Kristall-Kugel", icon: "üîÆ", features: ["Zukunfts-Vision"] },
    62: { name: "Licht-Br√ºcke", icon: "üåà", features: ["Verbindungen kn√ºpfen"] },
    63: { name: "Leucht-Stern", icon: "‚≠ê", features: ["F√ºhrungs-Qualit√§t"] },
    64: { name: "Funkel-Staub", icon: "‚ú®", features: ["Magische Aura"] },
    65: { name: "Milchstra√üen-Tor", icon: "üåå", features: ["Grenzenlos"] },
    66: { name: "Meteor-Schwarm", icon: "‚òÑÔ∏è", features: ["√úberw√§ltigend"] },
    67: { name: "Energie-Explosion", icon: "üí•", features: ["Durchschlagend"] },
    68: { name: "Kronen-Juwel", icon: "üëë", features: ["K√∂nigliche W√ºrde"] },
    69: { name: "Stern-Licht", icon: "üåü", features: ["Erleuchtend"] },
    70: { name: "Macht-Krone", icon: "üëë", features: ["H√∂chste Autorit√§t"] },
    71: { name: "Zeit-Uhr", icon: "‚åõ", features: ["Zeit-Kontrolle"] },
    72: { name: "Energie-Blitz", icon: "‚ö°", features: ["Power-Boost"] },
    73: { name: "Glitzer-Nebel", icon: "‚ú®", features: ["Mystische Kraft"] },
    74: { name: "Leucht-Signal", icon: "üåü", features: ["Wegweisend"] },
    75: { name: "Welt-Karte", icon: "üó∫Ô∏è", features: ["Globale Navigation"] },
    76: { name: "Wissens-Buch", icon: "üìö", features: ["Unendliches Wissen"] },
    77: { name: "Schrift-Rolle", icon: "üìú", features: ["Alte Weisheit"] },
    78: { name: "Notiz-Block", icon: "üìã", features: ["Perfekte Erinnerung"] },
    79: { name: "Lilien-Siegel", icon: "‚öúÔ∏è", features: ["Edles Sprechen"] },
    80: { name: "Zeit-Krone", icon: "üëë", features: ["Zeit-Herrschaft"] },
    81: { name: "Galaxie-Blitz", icon: "‚ö°", features: ["Kosmische Kraft"] },
    82: { name: "Stern-Staub", icon: "‚ú®", features: ["Magische Essenz"] },
    83: { name: "Polar-Stern", icon: "üåü", features: ["Ewiges Licht"] },
    84: { name: "Sand-Uhr", icon: "‚åõ", features: ["Zeit-Manipulation"] },
    85: { name: "Unendlich-Loop", icon: "‚àû", features: ["Endlose Macht"] },
    86: { name: "Weisheits-Folio", icon: "üìö", features: ["Absolutes Wissen"] },
    87: { name: "Welt-Auge", icon: "üåç", features: ["Globaler Blick"] },
    88: { name: "Zauber-Kugel", icon: "üîÆ", features: ["Magische Macht"] },
    89: { name: "Macht-Symbol", icon: "üëë", features: ["H√∂chste Gewalt"] },
    90: { name: "Universal-Krone", icon: "üëë", features: ["Absolute Herrschaft"] },
    91: { name: "Kaiser-Lilie", icon: "‚öúÔ∏è", features: ["Imperiale Macht"] },
    92: { name: "Kosmos-Staub", icon: "‚ú®", features: ["Universelle Essenz"] },
    93: { name: "Energie-Blitz", icon: "‚ö°", features: ["G√∂ttliche Kraft"] },
    94: { name: "Ewiger-Stern", icon: "üåü", features: ["Unsterbliche Macht"] },
    95: { name: "Schicksals-Kugel", icon: "üîÆ", features: ["Destiny Control"] },
    96: { name: "Unendlich-Symbol", icon: "‚àû", features: ["Grenzenlose Macht"] },
    97: { name: "Licht-Stern", icon: "‚≠ê", features: ["Ewiges Leuchten"] },
    98: { name: "Galaxie-Portal", icon: "üåå", features: ["Universums-Zugang"] },
    99: { name: "Herrscher-Krone", icon: "üëë", features: ["Supreme Control"] },
    100: { name: "Universal-Meister", icon: "üëë‚öúÔ∏è", features: ["Absolute Perfektion"] }
  };

const LevelUpCelebration = ({ level, isOpen, onClose }) => {
  const [showConfetti, setShowConfetti] = useState(false);
  
  useEffect(() => {
    if (isOpen) {
      setShowConfetti(true);
      triggerConfetti();
    }
  }, [isOpen]);

  const triggerConfetti = () => {
    const colors = ['#FFD700', '#4169E1', '#FF69B4', '#98FB98'];
    
    for (let i = 0; i < 100; i++) {
      createConfettiParticle(colors[Math.floor(Math.random() * colors.length)]);
    }
  };

  const createConfettiParticle = (color) => {
    const particle = document.createElement('div');
    particle.className = 'confetti';
    particle.style.backgroundColor = color;
    particle.style.left = Math.random() * 100 + 'vw';
    
    document.body.appendChild(particle);
    
    setTimeout(() => {
      document.body.removeChild(particle);
    }, 2500);
  };

  if (!isOpen) return null;

  const unlockedItem = UNLOCKABLE_ITEMS[level] || {
    name: "Geheimnisvoll",
    icon: "‚ú®",
    description: "Ein mysteri√∂ses Objekt wartet darauf, entdeckt zu werden.",
    features: ["???"]
  };

  return (
    <div className="level-up-overlay">
      <div className="level-up-modal">
        <div className="level-up-header">
          <span className="level-icon bounce">{unlockedItem.icon}</span>
          <h2>Level {level} erreicht!</h2>
          <span className="level-icon bounce">{unlockedItem.icon}</span>
        </div>

        <div className="unlock-section">
          <h3>Neuer Gegenstand freigeschaltet:</h3>
          <p className="item-name">{unlockedItem.name}</p>
          <p className="item-description">{unlockedItem.description}</p>
        </div>

        <div className="features-section">
          <h4>Besondere Eigenschaften:</h4>
          <ul>
            {unlockedItem.features.map((feature, index) => (
              <li key={index}>
                <span className="feature-star">‚òÖ</span>
                {feature}
              </li>
            ))}
          </ul>
        </div>

        <button className="continue-button" onClick={onClose}>
          Weiter erkunden
        </button>
      </div>
    </div>
  );
};

export default LevelUpCelebration;

